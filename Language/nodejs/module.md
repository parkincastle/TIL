# 노드의 모듈 개념📦

노드에서의 모듈이라는 개념은 노드로 개발한 애플리케이션을 이루는 기본 조각이라고 할 수 있다.

쉽게 말하면 물건을 만들 때 쓰는 부품이라고 할 수 있다. 그래서 모듈은 관련된 코드들을 모아서 캡슐화해놓은 것을 모듈이라고 한다. 그리고 여러 가지 모듈을 이용하면 프로젝트를 훨씬 더 수월하게 진행할 수 있습니다.

<br>

<div align="center">
    <img src = "img/module.png" width = "40%" >
</div>

<br>

일반적으로 노드로 개발된 애플리케이션은 자바스크립트를 기반으로 하고, 파일과 1:1 맵핑이 되는 다양한 모듈로 구성이 된다. 이는 노드를 개발할 때 개발자가 추가하는 모듈뿐만 아니라 노드의 기능을 확장할 수 있도록 해주는 확장 모듈과 기본으로 제공하는 기능에도 해당되는 이야기 이다.

<br><br>


## 노드의 모듈화 개념

<br>

모듈은 애플리케이션을 이루는 기본 단위로, 보통 다수의 클래스와 이를 통해 생성한 객체 등으로 구성된다. 이렇게 모듈 단위로 구성된다는 것은 **객체 지향 컨셉으로 애플리케이션이 구성**된다는 것을 의미한다. 이는 노드가 **CommonJS**의 스펙을 대부분 준수하기 때문이다.

<br>

기본적으로 노드의 모듈은 자바스크립트 파일 하나와 **1:1로 맵핑**된다고 생각 하면된다. 이러한 모듈 형태는 다음 장에서 설명할 **NPM**으로 쉽게 할 수 있는 노드 확장 모듈의 개발을 평리하게 해주며, 실제 우리가 애플리케이션을 개발할 때에도 소스 코드를 깔끔하게 구상할 수 있도록 도와준다.

<br>

노드의 모듈은 **CommonJS 모듈 스펙으로부터 많은 영향을 받아 구현**되었지만 완벽하게 같진 않다. 하지만 많은 유사점이 있고 CommonJS 기반의 다른 시스템과 공유하고자 한다면 이 스펙에 대해 이해하고 있는 것이 도움이 된다.

<br><br>

## 전역 객체의 개념

<br>

전역 객체는 어디에서나 사용할 수 있는 객체를 말한다. 클라이언트 자바스크립트에서는 **Window**나 **Document**와 같은 객체를 전역 객체라고 한다.
그리고 **서버 사이드에서 동작하는 노드**의 경우에는 **"Global"**이라는 전역객체가 존재하고 있는데, 여기에는 우리가 앞으로 모듈을 불러올 때 사용할 **require()**을 비롯한 **setTimeout(), console.log()**등을 포함하고 있다.

<br>

```JavaScript
require(‘./module’)
global.require(‘./module’)
```

<br>

위의 코드 2줄은 같은 의미이다(global이라는 전역 객체는 require()를 가지고 있기 때문).

<br><br>

# 모듈의 종류
<br>

노드에서는 모듈의 종률를 크게 노드 설치시 기본적으로 설치되어 있는지에 대한 유뮤를 통해 **기본 모듈**과 **확장 모듈**로,  단순히 자바스크립트로 작성하였는지, **C/C++** 등의 다른 언어를 사용하여 작성하고 빌드하여 개발했는지에 따라 **일반 모듈**과 **네이티브 모듈**로 나뉘고, 그리고 지금 현재 웹애플리케이션을 위해서만 사용하기 위해 설치했는지에 따라 글로벌 모듈과 로컬모듈 등으로 분류 할 수 있다. 


<br><br>

## 기본 모듈과 확장 모듈
<br>

**기본 모듈**은 노드를 설치하면 기본으로 설치되는 모듈로서 파일 입출력, 이벤트 관리, HTTP 프로토콜 관리 등에 관한 내용으로써 노드의 비동기 입출력 처리를 위한 기본적인 기능들을 제공하는 모듈이다.

**확장 모듈**은 기본모듈에 비해 노드의 기능을 확장하기 위한 것으로써 좀 더 쉬운  HTTP 서버 생성, 기본 파일 입출력에서 제공하지 않는 기능 추가 등 노드를 확장하고 더 편리하게 사용하기 위한 모듈이라고 할 수 있다.

또한 확장 모듈은 express와 같은 모듈처럼 프레임워크로서 제공되기도 하고, mongoDB를 사용하기 위한 mongoose나 mongolian처럼 다른 기술을 손쉽게 끌어와 사용할 수 있게 도와주는 역할도 한다.


<br><br>

## 일반 모듈과 네이티브 모듈
<br>

일반 모듈과 네이티브 모듈은 개발 방법에 따라 나눌 수 있는 내용이다. 

일반적으로 기본 모듈은 C/C++로 개발된 경우가 대부분이고 이렇게 네이티브 프로그래밍 언어인 C/C++로 노드의 모듈을 개발한 경우 **네이티브 모듈**이라고 한다. 

확장 모듈 또한 네이티브 모듈로 개발할 수 있고 **.node**라는 확장자를 가졌으면 네이티브 모듈로 컴파일된 것 이라고 생각하면 된다.

**일반 모듈**은 노드의 인터페이스를 통해 간단히 자바스크립트로 개발된 모듈이다. 

<br><br>

## 글로벌 모듈과 로컬 모듈
<br>

기본 모듈을 포함하여 어디서든 사용할 수 있도록 설치한 확장 모듈을 **글로벌 모듈**이라고 한다.
그리고 해당 애플리케이션에서만 사용하기 위해 설치한 확장 모듈이나 개발자가 개발한 모듈을 로컬 모듈이라고 분류할 수 있다. 확장 모듈을 글로벌 모듈로 사용하려면 설치 시 -g라는 옵션을 이용하면 된다.

<br><br>

## 복합 모듈
<br>

**복합 모듈**은 내부 모듈이나 데이터 파일, 템플릿, 테스트 코드 등을 포함하는 모듈을 말한다. 다양한 파일을 포함하기 때문에 모듈을 구성하는 단위가 폴더이며 내부적으로 폴더를 가질 수 있다. require() 메소드가 이런 폴더 단위의 모듈을 인식하려면 **index.js** 파일이나 **package.json** 파일 중 하나가 반드시 있어야한다.

<br><br>

## 모듈 식별자
<br>

노드의 모듈 이름으로는 확장자 없는 전체 경로를 사용한다. 앞서 설면한 것처럼 모듈은 파일과 일대일로 대응하기 때문에 .js나 .node라는 확장자를 가지지만 모듈을 불러들일 때는 파일 이름만 사용하면 되기 때문이다. 모듈의 식별자는 크게 **상대적 식별자**와 **절대적 식별자**, 그리고 **최상위 레벨 식별자**등 3가지가 있다.

<br>

> 상대 식별자 
> > 상대적 식별자는 현재 위치를 기준으로 상대적인 기준에 있는 모듈을 찾는 식별자 이다. 유닉스 시스템의 상대 경로와 비슷하다고 할 수 있으나 ./를 생략하면 현재위치에서 모듈을 찾지 않으니 주의하자.

<br>

> 절재적 식별자 
> > 절재적 식별자도 마찬가지로 절대 위치를 기준으로 그 결로에 걸맞는 모듈을 찾는 식별자 이다. 유닉스 시스템에서의 절대 경로와 유사하다.

<br>

> 최상위 레벨 식별자
> > 아무것도 입력하지 않고 모듈 이름만 입력하면 최상위 레벨 식별자로 인깃하고 설치된 전체 확장 모듈이나 기본 모듈 중에서 해당 모듈 이름을 검색하여 로드한다.


